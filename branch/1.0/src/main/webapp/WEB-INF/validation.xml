<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE form-validation PUBLIC "-//Apache Software Foundation//DTD Commons Validator Rules Configuration 1.1//EN" "http://jakarta.apache.org/commons/dtds/validator_1_1.dtd">

<form-validation>
     <global>
      <constant>
        <constant-name>phone</constant-name>
        <constant-value>^\(?(\d{8})\)$</constant-value>
      </constant>
      <constant>
        <constant-name>zip</constant-name>
        <constant-value>^[a-zA-Z0-9]+$</constant-value>
      </constant>
      <constant>
        <constant-name>currency</constant-name>
        <constant-value>^[A-Za-z0-9-]+$</constant-value>
      </constant> 
   </global>
   <formset>
        <form name="fileUpload">
            <field property="name" depends="required">
                <arg0 key="uploadForm.name"/>
            </field>
            <!-- Client-side Javascript won't catch this in IE, but server-side will -->
            <field property="file" depends="required">
                <arg0 key="uploadForm.file"/>
            </field>
        </form>
    </formset>

  <formset>
  <!--
    Define form validation config in validation-forms.xml
  -->

      <form name="address">
              <field property="city"
                     depends="required">

                  <arg0 key="address.city"/>
              </field>
              <field property="country"
                     depends="required">

                  <arg0 key="address.country"/>
              </field>
              <field property="postalCode"
                     depends="required,mask">
                  <msg
                    name="mask"
                    key="errors.zip"/>

                  <arg0 key="address.postalCode"/>
                  <var>
                    <var-name>mask</var-name>
                    <var-value>${zip}</var-value>
                  </var>
              </field>
              <field property="province"
                     depends="required">

                  <arg0 key="address.province"/>
              </field>
      </form>
      <form name="user">
              <field property="username"
                     depends="required">

                  <arg0 key="user.username"/>
              </field>
              <field property="firstName"
                     depends="required">

                  <arg0 key="user.firstName"/>
              </field>
              <field property="lastName"
                     depends="required">

                  <arg0 key="user.lastName"/>
              </field>
              <field property="address.address"
                     depends="required">

                  <arg0 key="user.address.address"/>
              </field>
              <field property="address.city"
                     depends="required">

                  <arg0 key="user.address.city"/>
              </field>
              <field property="address.country"
                     depends="required">

                  <arg0 key="user.address.country"/>
              </field>
    
              <field property="email"
                     depends="required,email">

                  <arg0 key="user.email"/>
              </field>
              <field property="phoneNumber"
                     depends="mask">
                  <msg
                    name="mask"
                    key="errors.phone"/>

                  <arg0 key="user.phoneNumber"/>
                  <var>
                    <var-name>mask</var-name>
                    <var-value>${phone}</var-value>
                  </var>
              </field>
      </form>
      
      <form name="image">
      	<field property="name" depends="required">
      		<arg0 key="image.name" />
      	</field>
      </form>
      <form name="manufacturer">
      	<field property="name" depends="required">
      		<arg0 key="manufacturer.name"/>
      	</field>
      </form>
      
      <form name="catalog">
      	<field property="name" depends="required">
      		<arg key="catalog.name"/>
      	</field>
      </form>
      <form name="brandName">
      	<field property="manufacturer" depends="required">
      		<arg0 key="brandName.manufacturer" />
      	</field>
        <field property="name" depends="required">
      		<arg0 key="brandName.name"/>
      	</field>
      </form>
      
      <form name="ingredient">
      	<field property="name" depends="required">
      		<arg0 key="ingredient.name"/>
      	</field>
      </form>
      <form name="product">
      	<field property="catalogs" depends="required">
      		<arg0 key="product.catalogs" />
      	</field>
      	<field property="price" depends="required">
      		<arg0 key="product.price" />
      	</field>
      	<field property="brandName" depends="required">
      		<arg0 key="product.brandName" />
      	</field>
      	<field property="name" depends="required">
      		<arg0 key="product.name" />
      	</field>
      	<field property="description" depends="maxlength">
      		<arg0 key="product.description" />
      		<arg1 name="maxlength" key="${var:maxlength}" resource="false"/>
      		<var>
      			<var-name>maxlength</var-name>
      			<var-value>2000</var-value>
      		</var>
      	
      	</field>
      </form> 
      <form name="subscription">
      	<field property="phoneNumber" depends="required">
      		<arg0 key="subscription.phoneNumber" />
      	</field>
      	<field property="email" depends="required">
      		<arg0 key="subscription.email" />
      	</field>

      </form>
  </formset>
</form-validation>
